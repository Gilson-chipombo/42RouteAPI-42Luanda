generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admins {
  id        Int     @id @default(autoincrement())
  full_name String? 
  username  String? @unique
  email     String? @unique
  passwrd   String?
}

model Cadetes {
  id        Int     @id @default(autoincrement())
  full_name String?
  username  String? @unique
  email     String? @unique
  city      String?
  distrit   String?
  passwrd   String?
  phone     Int?
  stop_id   Int?

  stop      MiniBusStop? @relation(fields: [stop_id], references: [id])
  messages  Message[]     @relation("CadeteMessages")
}

model Drivers {
  id        Int     @id @default(autoincrement())
  full_name String?
  username  String? @unique
  email     String? @unique
  passwrd   String?
  photo     String?
  phone     Int?

  messages      Message[]           @relation("DriverMessages")
  coordinates   DriverCoordinates[]
}

model MiniBusStop {
  id        Int     @id @default(autoincrement())
  stop_name String? @unique
  distrit   String?
  latitude  Float?
  longitude Float?

  cadetes   Cadetes[]
}

model Message {
  id         Int      @id @default(autoincrement())
  id_driver  Int
  id_cadete  Int
  message    String

  driver     Drivers @relation("DriverMessages", fields: [id_driver], references: [id])
  cadete     Cadetes @relation("CadeteMessages", fields: [id_cadete], references: [id])
}

model DriverCoordinates {
  id        Int     @id @default(autoincrement())
  lat       Float
  long      Float
  id_driver Int

  driver    Drivers @relation(fields: [id_driver], references: [id])
}
